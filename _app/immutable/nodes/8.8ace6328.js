import{s as be,r as _e,o as ye}from"../chunks/scheduler.ce710c66.js";import{S as xe,i as we,g as r,r as de,s as b,m as Ie,h as n,j as _,u as fe,c as y,y as O,f as h,n as Te,k as s,a as ke,v as me,x as e,D as A,A as P,G as Ce,d as pe,t as ge,w as he}from"../chunks/index.f931a049.js";import{P as De,a as Ee,g as te}from"../chunks/page.23219c06.js";import{a as Ve,t as G}from"../chunks/stores.0e57d9f4.js";import{c as Le}from"../chunks/auth.6035c411.js";import{e as ve}from"../chunks/singletons.e0ffaafb.js";function Se(l){let u,i,D,x,o,c,q='<h2 class="mt-6 text-center text-2xl font-extrabold text-gray-900">تسجيل الدخول</h2>',S,$,g,t,w,m,J,M,p,K,j,v,W,H,U,R,E,se="<span>or</span>",Q,I,T,ae="فيسبوك",X,k,oe="جوجل",Y,V,re='<span class="text-sm">ليس لديك حساب؟</span> <a href="/signup" class="font-medium text-[#f9ca03] hover:text-[#f9ca03]">اشتراك</a>',Z,C,L,ee,ne;return i=new De({props:{data:l[0]}}),C=new Ee({props:{data:l[0]}}),{c(){u=r("main"),de(i.$$.fragment),D=b(),x=r("div"),o=r("div"),c=r("div"),c.innerHTML=q,S=b(),$=b(),g=r("form"),t=r("div"),w=r("div"),m=r("input"),J=b(),M=r("div"),p=r("input"),K=b(),j=r("div"),v=r("button"),W=Ie("تسجيل الدخول"),R=b(),E=r("div"),E.innerHTML=se,Q=b(),I=r("div"),T=r("button"),T.textContent=ae,X=b(),k=r("button"),k.textContent=oe,Y=b(),V=r("div"),V.innerHTML=re,Z=b(),de(C.$$.fragment),this.h()},l(a){u=n(a,"MAIN",{class:!0});var d=_(u);fe(i.$$.fragment,d),D=y(d),x=n(d,"DIV",{class:!0});var N=_(x);o=n(N,"DIV",{class:!0});var f=_(o);c=n(f,"DIV",{"data-svelte-h":!0}),O(c)!=="svelte-3gjfqn"&&(c.innerHTML=q),S=y(f),$=y(f),g=n(f,"FORM",{class:!0});var B=_(g);t=n(B,"DIV",{class:!0});var F=_(t);w=n(F,"DIV",{});var le=_(w);m=n(le,"INPUT",{class:!0,placeholder:!0,minlength:!0,maxlength:!0,type:!0}),le.forEach(h),J=y(F),M=n(F,"DIV",{});var ie=_(M);p=n(ie,"INPUT",{class:!0,placeholder:!0,minlength:!0,maxlength:!0,type:!0}),ie.forEach(h),F.forEach(h),K=y(B),j=n(B,"DIV",{});var ue=_(j);v=n(ue,"BUTTON",{class:!0,type:!0});var ce=_(v);W=Te(ce,"تسجيل الدخول"),ce.forEach(h),ue.forEach(h),B.forEach(h),R=y(f),E=n(f,"DIV",{class:!0,"data-svelte-h":!0}),O(E)!=="svelte-3054w9"&&(E.innerHTML=se),Q=y(f),I=n(f,"DIV",{class:!0});var z=_(I);T=n(z,"BUTTON",{class:!0,"data-svelte-h":!0}),O(T)!=="svelte-1h52t85"&&(T.textContent=ae),X=y(z),k=n(z,"BUTTON",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-1xevmu6"&&(k.textContent=oe),z.forEach(h),Y=y(f),V=n(f,"DIV",{class:!0,"data-svelte-h":!0}),O(V)!=="svelte-57qm9i"&&(V.innerHTML=re),f.forEach(h),N.forEach(h),Z=y(d),fe(C.$$.fragment,d),d.forEach(h),this.h()},h(){s(m,"class","appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-[#f9ca03] focus:border-[#f9ca03] focus:z-10 sm:text-sm"),s(m,"placeholder","أدخل عنوان بريدك الالكتروني"),s(m,"minlength","7"),s(m,"maxlength","255"),m.required=!0,s(m,"type","email"),s(p,"class","appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-[#f9ca03] focus:border-[#f9ca03] focus:z-10 sm:text-sm"),s(p,"placeholder","أدخل كلمة مرور طويلة مكونة من 6 أرقام"),s(p,"minlength","6"),s(p,"maxlength","255"),s(p,"type","password"),p.required=!0,s(t,"class","rounded-md shadow-sm -space-y-px"),v.disabled=H=!l[3],s(v,"class",U="group cursor-pointer relative w-full flex justify-center py-2 px-4 text-sm font-medium rounded-md text-white bg-[#f9ca03] border-2 border-[#f9ca03] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#f9ca03] "+(l[2]||!l[3]?"opacity-50  cursor-not-allowed ":" cursor-pointer   hover:bg-white hover:text-[#f9ca03]")),s(v,"type","submit"),s(g,"class","mt-8 space-y-6"),s(E,"class","text-center"),s(T,"class","m-2 px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),s(k,"class","m-2 px-3 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),s(I,"class","flex items-center justify-center"),s(V,"class","text-center"),s(o,"class","max-w-md w-full space-y-4 bg-white my-4 px-4 py-4 rounded-md"),s(x,"class","min-h-screen flex items-center justify-center bg-gray-100"),s(u,"class","bg-[#fff]")},m(a,d){ke(a,u,d),me(i,u,null),e(u,D),e(u,x),e(x,o),e(o,c),e(o,S),e(o,$),e(o,g),e(g,t),e(t,w),e(w,m),A(m,l[1].email),e(t,J),e(t,M),e(M,p),A(p,l[1].password),e(g,K),e(g,j),e(j,v),e(v,W),e(o,R),e(o,E),e(o,Q),e(o,I),e(I,T),e(I,X),e(I,k),e(o,Y),e(o,V),e(u,Z),me(C,u,null),L=!0,ee||(ne=[P(m,"input",l[6]),P(p,"input",l[7]),P(g,"submit",Ce(l[4])),P(T,"click",l[5]),P(k,"click",$e)],ee=!0)},p(a,[d]){const N={};d&1&&(N.data=a[0]),i.$set(N),d&2&&m.value!==a[1].email&&A(m,a[1].email),d&2&&p.value!==a[1].password&&A(p,a[1].password),(!L||d&8&&H!==(H=!a[3]))&&(v.disabled=H),(!L||d&12&&U!==(U="group cursor-pointer relative w-full flex justify-center py-2 px-4 text-sm font-medium rounded-md text-white bg-[#f9ca03] border-2 border-[#f9ca03] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#f9ca03] "+(a[2]||!a[3]?"opacity-50  cursor-not-allowed ":" cursor-pointer   hover:bg-white hover:text-[#f9ca03]")))&&s(v,"class",U);const f={};d&1&&(f.data=a[0]),C.$set(f)},i(a){L||(pe(i.$$.fragment,a),pe(C.$$.fragment,a),L=!0)},o(a){ge(i.$$.fragment,a),ge(C.$$.fragment,a),L=!1},d(a){a&&h(u),he(i),he(C),ee=!1,_e(ne)}}}function $e(){}function Me(l,u,i){let D,{data:x}=u,o=!1,c={email:"",password:""};function q(){if(!D){alert("الرجاء تعبئة جميع الحقول");return}i(2,o=!0),fetch("https://admin.souqpack.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(t=>t.json()).then(t=>{if(console.log("Success:",t),t.action=="success"){localStorage.setItem("login_data",JSON.stringify(t.data)),Ve.set({isLoggedIn:!0,token:t.data.token,user:t.data}),G.set({show:!0,message:"تم تسجيل الدخول بنجاح",type:"success"});const w=localStorage.getItem("myKey");w==="fromcheckout"?(console.log("fromcheckout",w),localStorage.removeItem("myKey"),te(`${ve}/checkout`)):(console.log("dashboard"),te(`${ve}/dashboard`))}else i(2,o=!1),G.set({show:!0,message:t.error,type:"error"})}).catch(t=>{i(2,o=!1),console.error("Error:",t),G.set({show:!0,message:"خطأ في الشبكة",type:"error"})})}function S(){G.set({show:!0,message:"تحت التطوير",type:"info"})}ye(async()=>{await Le()&&te("/dashboard")});function $(){c.email=this.value,i(1,c)}function g(){c.password=this.value,i(1,c)}return l.$$set=t=>{"data"in t&&i(0,x=t.data)},l.$$.update=()=>{l.$$.dirty&2&&i(3,D=c.email.length>3&&c.password.length>6)},[x,c,o,D,q,S,$,g]}class Ue extends xe{constructor(u){super(),we(this,u,Me,Se,be,{data:0})}}export{Ue as component};
